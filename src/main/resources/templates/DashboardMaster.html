<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css"
	href="/webjars/bootstrap/4.3.1/css/bootstrap.min.css"
	th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.min.css}">
<link rel="stylesheet" type="text/css"
	href="/webjars/font-awesome/5.9.0/css/all.min.css"
	th:href="@{/webjars/font-awesome/5.9.0/css/all.min.css}">
<link rel="stylesheet" type="text/css"
	href="/webjars/jquery-ui/1.12.1/jquery-ui.min.css"
	th:href="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.css}">
<link rel="stylesheet" type="text/css"
	href="/webjars/datatables/1.10.19/css/jquery.dataTables.min.css"
	th:href="@{/webjars/datatables/1.10.19/css/jquery.dataTables.min.css}">
<link rel="shortcut icon" th:href="@{/favicon.ico}" type="image/x-icon">
<link rel="icon" th:href="@{/favicon.ico}" type="image/x-icon">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="/webjars/bootstrap/4.3.1/js/bootstrap.min.js"
	th:src="@{/webjars/bootstrap/4.3.1/js/bootstrap.min.js}"></script>
<script src="/webjars/popper.js/1.14.7/umd/popper.min.js"
	th:src="@{/webjars/popper.js/1.14.7/umd/popper.min.js}"></script>
<script src="/webjars/jquery/3.4.1/jquery.min.js"
	th:src="@{/webjars/jquery/3.4.1/jquery.min.js}"></script>
<script src="/webjars/jquery-ui/1.12.1/jquery-ui.min.js"
	th:src="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.js}"></script>
<script src="/webjars/jquery-form/4.2.2/jquery.form.min.js"
	th:src="@{/webjars/jquery-form/4.2.2/jquery.form.min.js}"></script>
<script src="/webjars/jquery-validation/1.19.0/jquery.validate.min.js"
	th:src="@{/webjars/jquery-validation/1.19.0/jquery.validate.min.js}"></script>
<script src="/webjars/datatables/1.10.19/js/jquery.dataTables.min.js"
	th:src="@{/webjars/datatables/1.10.19/js/jquery.dataTables.min.js}"></script>
<script
	src="/webjars/datatables/1.10.19/js/dataTables.bootstrap4.min.js"
	th:src="@{/webjars/datatables/1.10.19/js/dataTables.bootstrap4.min.js}"></script>

<script
	src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
<style>
.btns {
	float: right;
	margin: 5px;
}

.col-sm-5 {
	padding-bottom: 15px;
}

.list-body {
	padding: 0px;
}

.error {
	color: red;
	padding-left: 10px;
}

.formline {
	padding-bottom: 4px;
}

#finusertb {
	width: 460px;
}

.dataTables_wrapper .dataTables_paginate .paginate_button {
	padding: 0px;
}

fieldset {
	border: 1px solid #CCC;
	border-radius: 5px;
	padding: 10px;
	margin-top: 10px;
}
.card-header,.card-footer{
background-color:#BBC3CB;
}
legend {
    color: #3C6EAC;
    font-size: 20px;
    font-weight: bold !important;
    text-align: left !important;
    border-bottom: none;
}

.filterable .filters input[disabled] {
	background-color: transparent;
	border: none;
	cursor: auto;
	box-shadow: none;
	padding: 0;
	height: auto;
}

.filterable .filters input[disabled]::-webkit-input-placeholder {
	color: #333;
}

.filterable .filters input[disabled]::-moz-placeholder {
	color: #333;
}

.filterable .filters input[disabled]:-ms-input-placeholder {
	color: #333;
}
table{
width:50%;
}
<!-- .container-fluid{
width:900px;
padding-right:100px;
} -->
.content-page {
	margin-left: 16%;
	overflow: hidden;
	padding: 0 15px 65px 15px;
	margin-top: 101px;
	width: 100vw;


}
      .total{
        display:flux;
        text-align:center;
        padding-top:20px;
        padding-left:170px;
        }
        .inp{
        border:none;
        outline:none;
        color:#000000;
        font-weight:bold;
        }
				 #myPieChart {
        width: 50% !important;
        height: 50% !important;
    }
	#graph3, #graph2, #graph3, #graph4 {
    border: 1px solid #000000; /* Adds a black border with 2px width */
    /* Optional: Adds space between the border and the content */
    border-radius: 5px; /* Optional: Rounds the corners of the border */
    box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.1); /* Optional: Adds a subtle shadow for aesthetics */
}



</style>
<script th:inline="javascript">
	/*<![CDATA[*/
	//DatePicker
	$(function() {

		$("#startDate,#endDate,#assignDate,#dob").datepicker({

			changeMonth : true,
			changeYear : true,
			dateFormat : "dd-mm-yy"
		});

	});

	function home() {
		location.href = 'Dashboard'
	}

	function back() {
		window.history.back();
	}

	


	
</script>

</head>

<title>BAM</title>

<body>
	<div th:insert="BTMHeaderMenu :: header"></div>
		
				
					

						
						<div class="content-page" style="height: fit-content; ">
				<div style="display: flex;">
				<div id = "graph3" style="width: 50%;">		
					<h3 style="text-align: center;"> Inventories</h3>
					<canvas id="myBarChart"  ></canvas>
        <div class="total">
        <p><b>Total Inventory:
        <input class="inp" type="text" id="total" readonly/>
       </b></p>
			</div>
			</div>

					<div id = "graph2" style="width: 50%;">		<h3 style="text-align: center;">Depreciation</h3>	<canvas id="myBarChart2" ></canvas></div>
					</div>
					<div style="display: flex;">
					<div id = "graph3" style="width: 50%;">		<h3 style="text-align: center;">Location</h3>	 <canvas id="myBarChart3" ></canvas></div>
					<div id = "graph4" style="width: 50%;">	
						<h3 style="text-align: center;">Categories</h3>	 
						<div style=" display: flex;align-items: center; justify-content: center;">
						<canvas id="myPieChart" 
						style="width: 50%"></canvas>
                                            
                                      
							</div>
							 <div class="total">
                                                <p><b>total inventory:
                                                        <input class="inp" type="text" id="total" />
                                                    </b></p>
                                            </div> 
						</div>

						</div>
					</div>
		




<script>

// Function to navigate based on the text content of the <a> tag
function navigateBasedOnText(dashBoardText) {
    // Conditional logic based on the text content
    if (dashBoardText === 'Depreciation') {
        location.href = 'Dep_Graphs1'; // Redirect to Dep_Graphs1 controller
    } 
    else if (dashBoardText === 'Location') {
        location.href = 'Location_Graphs1'; // Redirect to Location_Graphs1 controller
    } 
    else if (dashBoardText === 'Categories') {
        location.href = 'Categ_Graphs1'; // Redirect to Categ_Graphs1 controller
    } 
    else if (dashBoardText === 'Inventories') {
        location.href = 'Graphs1'; // Redirect to Graphs1 controller
    }
}
//graph 1
document.addEventListener("DOMContentLoaded", function () {
	
            var ctx = document.getElementById('myBarChart').getContext('2d');
            var myBarChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['APR', 'MAY', 'JUN','JULY','AUG','SEP','OCT','NOV','DEC','JAN','FEB','MAR',],
                    datasets: [{
                        label: 'INVENTORYIES',
                        data: [0, 0, 0],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.9)',
                            'rgba(255, 99, 132, 0.9)','rgba(255, 99, 132, 0.9)','rgba(255, 99, 132, 0.9)',
                            'rgba(255, 99, 132, 0.9)','rgba(255, 99, 132, 0.9)','rgba(255, 99, 132, 0.9)','rgba(255, 99, 132, 0.9)',
                            'rgba(255, 99, 132, 0.9)','rgba(255, 99, 132, 0.9)','rgba(255, 99, 132, 0.9)','rgba(255, 99, 132, 0.9)'
                            
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)','rgba(255, 99, 132, 1)','rgba(255, 99, 132, 1)','rgba(255, 99, 132, 1)',
                            'rgba(255, 99, 132, 1)','rgba(255, 99, 132, 1)','rgba(255, 99, 132, 1)','rgba(255, 99, 132, 1)',
                            'rgba(255, 99, 132, 1)','rgba(255, 99, 132, 1)','rgba(255, 99, 132, 1)','rgba(255, 99, 132, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        },
                        x: {
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function (tooltipItem) {
                                    return tooltipItem.dataset.label + ': ' + tooltipItem.raw;
                                }
                            }
                        }
                    }
                }
            });
            
            function updateChart(data) {
            	myBarChart.data.datasets[0].data = data;
                myBarChart.update();
                
            }

            
                var year = new Date().getFullYear();
                fetchDataAndUpdateChart(year);
           

            function fetchDataAndUpdateChart(year) {
                if (year) {
                    // Placeholder for fetching data based on selected month and year
                    // Replace the following with actual data fetching logic
                    $.ajax({
                    	type:'GET',
                    	url:"./Graphsdata",
                    	data:{year:year},
                    	success:function(response){
                    		var totalinventory=response.totalinventory;
                    		var APR = response.APR;
                    		var MAY = response.MAY;
                    		var JUN = response.JUN;
                    		var JULY = response.JULY;
                    		var AUG = response.AUG;
                    		var SEP = response.SEP;
                    		var OCT = response.OCT;
                    		var NOV = response.NOV;
                    		var DEC = response.DEC;
                    		var JAN = response.JAN;
                    		var FEB = response.FEB;
                    		var MAR = response.MAR
                    		//var newinventory= response.newinventory;
                    		var t=document.getElementById("total");
                    		
                    		
                    		if(totalinventory ==0 && APR==0 && MAY==0 && JUN==0 && JULY==0 && AUG==0 && SEP==0 && OCT==0 && NOV==0 && DEC==0 && JAN==0 && FEB==0 && MAR==0 ){
                    			alert("No Record found in this date");
                    			location.reload();
                    		}
                    		else{
                    		t.value=totalinventory;
                    		updateChart([APR,MAY,JUN,JULY,AUG,SEP,OCT,NOV,DEC,JAN,FEB,MAR]);
                    		
                    		}
                    	},
                    	error: function(error) {
                            console.error("Error fetching asset details:", error);
                          
                        }
                    });
                    }
                    
                }

            function generateDummyData(month, year) {
                // Replace this with actual data fetching logic
                return [100.00, 10.525,10.5323];
            }
        });


				//graph2
				document.addEventListener("DOMContentLoaded", function () {
    // Initialize the bar chart
    var ctx = document.getElementById('myBarChart2').getContext('2d');
    var myBarChart2 = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: [
                'January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'
            ],
            datasets: [
                {
                    label: 'Depreciation Assets',
                    data: Array(12).fill(0), // Initialize with 0
                    backgroundColor: 'rgba(0, 51, 153, 1)',
                    borderColor: 'rgba(255, 192, 192, 1)',
                    borderWidth: 1
                },
                {
                    label: 'Depreciation Cost',
                    data: Array(12).fill(0), // Initialize with 0
                    backgroundColor: 'rgba(255, 159, 64, 1)',
                    borderColor: 'rgba(255, 159, 64, 1)',
                    borderWidth: 1
                }
            ]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true
                }
            },
            plugins: {
                legend: {
                    display: true,
                    position: 'top'
                }
            }
        }
    });

    // Function to fetch data and update chart
    function updateChartData() {
        var year = new Date().getFullYear(); // Get current year

        if (year) {
            $.ajax({
                type: 'GET',
                url: './Dep_Graphdata',
                data: { year: year },
                success: function (response) {
                    // Extract data for the chart
                    const assetCounts = [
                        response.finalassetjan, response.finalassetfeb, response.finalassetmar,
                        response.finalassetapr, response.finalassetmay, response.finalassetjun,
                        response.finalassetjul, response.finalassetaug, response.finalassetsep,
                        response.finalassetoct, response.finalassetnov, response.finalassetdec
                    ];

                    const depreciationCosts = [
                        response.ASSETDepreciationjan, response.ASSETDepreciationfeb, response.ASSETDepreciationmar,
                        response.ASSETDepreciationapr, response.ASSETDepreciationmay, response.ASSETDepreciationjun,
                        response.ASSETDepreciationjul, response.ASSETDepreciationaug, response.ASSETDepreciationsep,
                        response.ASSETDepreciationoct, response.ASSETDepreciationnov, response.ASSETDepreciationdec
                    ];

                    // Update chart data
                    myBarChart2.data.datasets[0].data = assetCounts;
                    myBarChart2.data.datasets[1].data = depreciationCosts;
                    myBarChart2.update();
                },
                error: function (error) {
                    console.error("Error fetching asset details:", error);
                    alert("An error occurred while fetching the data. Please try again later.");
                }
            });
        }
    }

    // Fetch and update chart data on load
    updateChartData();
});

//graph3
document.addEventListener("DOMContentLoaded", function() {
        var ctx = document.getElementById('myBarChart3').getContext('2d');
        
        var myBarChart3 = new Chart(ctx, {
            type: 'bar',  // Use 'bar' type for horizontal bar chart
            data: {
                labels: ['office', 'Branch', 'Quaters', 'general'],
                datasets: [{
                    label: 'Value',
                    data: [0, 0, 0, 0],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.9)',
                        'rgba(54, 162, 235, 0.9)',
                        'rgba(255, 206, 86, 0.9)',
                        'rgba(75,192,75,0.9)'],
                    borderColor: [
                        'rgba(255, 99, 132, 0.6)',
                        'rgba(54, 162, 235, 0.6)',
                        'rgba(255, 206, 86, 0.6)',
                        'rgba(75,192,75,0.6)'],
                    borderWidth: 1
                }]
            },
            options: {
                indexAxis: 'x', // This will flip the axis to make it horizontal
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        }); 

        
        // You can add additional logic to handle month and year selection here
        function updateChart(data) {
            myBarChart3.data.datasets[0].data = data;
            myBarChart3.update();
        }
        

            var year = new Date().getFullYear();
            fetchDataAndUpdateChart(year);
        

        function fetchDataAndUpdateChart(year) {
            if (year) {
                // Placeholder for fetching data based on selected month and year
                // Replace the following with actual data fetching logic
                
                $.ajax({
                    	type:'GET',
                    	url:"./Location_Graphdata",
                    	data:{year:year},
                    	success:function(response){
                    		          var totalinventory=response.totalinventory;
                    		          var office=response.office;
                    		          var branch= response.branch;
                    		          var quarters= response.quarters;
                    		          var general= response.general;
                    		          
                    		          
                    			if(totalinventory ==0 &&  office==0 && branch==0 && quarters==0 &&general==0 ){
                    			alert("No Record found in this date");
                    			location.reload();
                    		}
                    		else{
                    		//t.value=totalinventory;
                    		updateChart([office,branch,quarters,general]);
                    		}
                    	},
                    	error: function(error) {
                            console.error("Error fetching asset details:", error);
                          
                        }
                    });

                
                
            }
        }

        function generateDummyData(month, year) {
            // Replace this with actual data fetching logic
            return [Math.random() * 100, Math.random() * 100, Math.random() * 100, Math.random() * 100];
        }

            
    });

		//graph4
		document.addEventListener("DOMContentLoaded", function () {
            var ctx = document.getElementById('myPieChart').getContext('2d');
            var myPieChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Furniture & Fittings', 'Machinery & Plant', 'Premises'],
                    datasets: [{
                        data: [0, 0, 0],
                        backgroundColor: ['#FFC0CB', '#33FF57', '#3357FF'],
                        borderColor:['#FF5733', '#33FF57', '#3357FF'],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function (tooltipItem) {
                                    return tooltipItem.label + ': ' + tooltipItem.raw + '%';
                                }
                            }
                        }
                    }
                }
            });

            function updateChart(data) {
                myPieChart.data.datasets[0].data = data;
                myPieChart.update();
            }

            
                var year = new Date().getFullYear();
                fetchDataAndUpdateChart(year);
           

            function fetchDataAndUpdateChart(year) {
                if (year) {
                    // Placeholder for fetching data based on selected month and year
                    // Replace the following with actual data fetching logic
                    $.ajax({
                    	type:'GET',
                    	url:"./Categ_Graphdata",
                    	data:{year:year},
                    	success:function(response){
                    		          var totalinventory=response.totalinventory;
                    		          //alert(totalinventory);
                    		          var FurnitureFittings=response.FurnitureFittings;
                    		          var MachineryPlant= response.MachineryPlant;
                    		          var Premises= response.Premises;
                    		          
                    			if(totalinventory ==0 &&  FurnitureFittings==0 && MachineryPlant==0 && Premises==0 ){
                    			alert("No Record found in this date");
                    			location.reload();
                    		}
                    	
                    		else{
                    		total.value=totalinventory;
                    		updateChart([FurnitureFittings,MachineryPlant,Premises]);
                    		}
                    	},
                    	error: function(error) {
                            console.error("Error fetching asset details:", error);
                          
                        }
                    });
                    }
                    
                }

            function generateDummyData(month, year) {
                // Replace this with actual data fetching logic
                return [100.00, 10.525,10.5323];
            }
        });


</script>

</html>